## Being the Worst

This folder contains additional materials for "Being the Worst" podcast, **Episode 17 â€“ View Projections**.

The projects for E17 also represent the final version of the **Car Factory sample domain** within the beingtheworst.com podcast.

The Visual Studio solution contains three projects related to Episode 17.

* **E017.Domain.Test.Console** - (Added new commands to the console to see views "factories", "inventory", "workers")
* **E017.Domain.Test** - (Similar to Episode 14+15)
* **E017.Domain** - (Added new commands to the console to see views "factories", "inventory")



Technically, the code here matches the approach used by Lokad for production purposes (at the moment of writing), however the domain is far from being perfect.

* CSharp sample project covering Aggregates, Event Sourcing, Application Services, View Projections, Domain Services, DSL code-generation, and Specifications/Unit Tests
* See "Visual Studio Settings" section on how to setup .ddd files:[ http://lokad.github.com/lokad-codedsl/](http://lokad.github.com/lokad-codedsl/)
* To execute a version of the Lokad-codedsl utility included in the sample, please launch the dsl.cmd inside of \E017-view-projections\sample-csharp\dsl.cmd"
* If you keep this DSL console utility running in the background it will automatically re-generate C# code in Messages.cs when you make changes and save the Messages.ddd file inside of the "Contracts" folder of the project.
* TestMessageSerialization.cs: How to test that DataContract serializers don't lose your data when you round-trip.
* DocumentFixture.cs: How to generate graph diagrams from your Specifications, Unit Tests, and Command/Event messages.
* Interact with your Aggregates via a command-line console.
* Projections creating Views


How to run the tests?
--------------------- 	

There are two options:

* You can open the solution and Right-Click on "E017.Domain.Test", Debug-->Start New Instance, to run the Domain.Test console application (it will print specification text output to the console)
* or
* Open the solution in Visual Studio and run unit tests (e.g. with NUnit runner or ReSharper built-in test runner)
* Ex: Launch NUnity GUI, Open project: "\E017-view-projections\sample-csharp\E017.Domain.Test\bin\Debug\E017.Domain.Test.exe", and Run the tests.

Then watch what is printed to output for each test.


Visualize Your Domain - How to view .dot graph diagram files generated by DocumentFixture.cs?
--------------------------------------------------------------------- 

* Download [Graphviz application](http://graphviz.org/)
* In NUnit you will see a "Document Fixture" node, run the "Test" under it.
* By default, this sample outputs a "**graph.dot**" file inside of \E017.Domain.Test\bin\Debug
* open the graph.dot file in Graphviz
* An example of the graph.dot file converted to a PNG diagram by Graphviz is included in the Domain.Test project as "Factory_diagram_by_Graphviz.png"


How to use the domain's interactive console?
-----------------------------------

* Debug-->Start New Instance to run the E017.Domain.Test.Console project
* Type the following at the console's command line:
* help (enter)
* story 1 (enter)
* hire 1 yoda  (enter)
* hire 1 yoda  (enter - yes do it again)
* hire 2 yoda  (enter)
* open 2 (enter)
* hire 2 yoda  (enter)
* factories  (enter)
* workers  (enter)
* inventory (enter)

Also note that the story command just sends a bunch of commands to the server to execute and you can do the same with pre-defined script of commands/actions to run (CI server, manually enter commands, etc.)


How to understand it?
---------------------

Listen to the first 17 episodes of [beingtheworst.com](http://beingtheworst.com/about) podcast, focusing on [episodes](http://beingtheworst.com/category/podcasts) 11, 12, 14, 15, 16, + 17.


Subscribe to the podcast at [beingtheworst.com](http://feeds.feedburner.com/beingtheworst)
or via [iTunes](http://itunes.apple.com/us/podcast/being-the-worst/id554597082).

Follow us on twitter: [@beingtheworst](https://twitter.com/beingtheworst)

Best regards,

Kerry Street [@kcstreet](https://twitter.com/kcstreet) and Rinat Abdullin [@abdullin](https://twitter.com/abdullin)
