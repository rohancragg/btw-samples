## Being the Worst

This folder contains additional materials for **Episode 15 â€“ The Bits That Keep On Giving**:

This is part of the final version of the **Car Factory sample** within the beingtheworst.com podcast.

Technically, the code here matches the approach used by Lokad for production purposes (at the moment of writing), however the domain is far from being perfect.

* CSharp sample project covering Application Services, Domain Services, DSL code-generation, and Specifications/Unit Tests
* See "Visual Studio Settings" section on how to setup .ddd files:[ http://lokad.github.com/lokad-codedsl/](http://lokad.github.com/lokad-codedsl/)
* To execute a version of the Lokad-codedsl utility included in the sample, please launch the dsl.cmd inside of E015-car-factory-tests\sample-csharp\dsl.cmd"
* If you keep this DSL console utility running in the background it will automatically re-generate C# code in Messages.cs when you make changes and save the Messages.ddd file inside of the "Contracts" folder of the project.
* How to test that DataContract serializers don't lose your data when you round-trip.
* How to generate graph diagrams from your Specifications, Unit Tests, and Command/Event messages.
* Interact with your Aggregates via a command-line console.

The Visual Studio solution contains four projects related to Episode 15.

* **E015.Domain.Test.Console** - (New to Episode 15 - contains code for the command-line console to interact with the Factory Aggregates and their related Commands and Events)
* **E015.Domain.Test** - (contains the specifications, unit tests, and a console test runner that tests the Domain - Similar to Episode 14 but adds DocumentFixture.cs to create Graphviz diagrams.)
* **E015.Domain** - (contains the Domain and actual code for it - Same as Episode 14)
* **E015.Btw.Portable** - (some basic infrastructure code that you can ignore for now)


How to run the tests?
--------------------- 	

There are two options:

* You can open the solution and run Domain.Test as a console application (it will print specification text output to the console)
* Open the solution in Visual Studio and run unit tests (e.g. with NUnit runner or ReSharper built-in test runner)

Then watch what is printed to output for each test.


How to view .dot graph diagram files generated by DocumentFixture.cs?
--------------------------------------------------------------------- 

* Download [Graphviz application](http://graphviz.org/)
* By default, this sample outputs a "graph.dot" file inside of \E015.Domain.Test\bin\Debug
* An example of the graph.dot file converted to a PNG diagram by Graphviz is included in the Domain.Test project as "Factory_diagram_by_Graphviz.png"


How to use the interactive console?
-----------------------------------

* Run the E015.Domain.Test.Console project
* Type the following:
* help (enter)
* story 1 (enter)
* hire 1 yoda  (enter)
* hire 1 yoda  (enter - yes do it again)
* hire 2 yoda  (enter)

Also note that the story command just sends a bunch of commands to the server to execute and you can do the same with pre-defined script of commands/actions to run (CI server, manually enter commands, etc.)


How to understand it?
---------------------

Listen to the first 15 episodes of [beingtheworst.com](http://beingtheworst.com/about) podcast, focusing on [episodes](http://beingtheworst.com/category/podcasts) 11, 12, 14 and 15.


Subscribe to the podcast at [beingtheworst.com](http://feeds.feedburner.com/beingtheworst)
or via [iTunes](http://itunes.apple.com/us/podcast/being-the-worst/id554597082).

Follow us on twitter: [@beingtheworst](https://twitter.com/beingtheworst)

Best regards,

Kerry Street [@kcstreet](https://twitter.com/kcstreet) and Rinat Abdullin [@abdullin](https://twitter.com/abdullin)
